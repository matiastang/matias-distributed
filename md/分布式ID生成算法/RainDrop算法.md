<!--
 * @Author: tangdaoyong
 * @Date: 2021-02-04 09:37:54
 * @LastEditors: tangdaoyong
 * @LastEditTime: 2021-02-04 09:38:10
 * @Description: RainDrop算法
-->
# RainDrop算法

1）算法说明

为了解决JavaScript丢失精度问题，由Snowflake算法改造而来的53位的分布式Id生成算法。

+--------------------------------------------------------------------------+
| 11 Bit Unused | 32 Bit Timestamp |  7 Bit NodeId  |   14 Bit Sequence Id |
+--------------------------------------------------------------------------+

最高11位是符号位，始终为0，不可用，解决JavaScript的精度丢失。

32位的时间序列，精确到秒级，32位的长度可以使用136年。

7位的机器标识，7位的长度最多支持部署128个节点。

14位的计数序列号，序列号即一系列的自增Id，可以支持同一节点同一秒生成多个Id，14位的计数序列号支持每个节点每秒单机产生16384个Id。

2）算法总结

优点：

完全是一个无状态机，无网络调用，高效可靠。

缺点：

依赖机器时钟，如果时钟错误比如时钟不同步、时钟回拨，会产生重复Id。
容量存在局限性，32位的长度可以使用136年，一般够用。
并发局限性，低于snowflake。
只适用于int64类型的Id分配，int32位Id无法使用。

3）适用场景

一般的Web应用程序的int64类型的Id都基本够用。