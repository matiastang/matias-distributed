<!--
 * @Author: tangdaoyong
 * @Date: 2021-02-04 09:38:21
 * @LastEditors: tangdaoyong
 * @LastEditTime: 2021-02-04 09:38:21
 * @Description: 分区独立分配算法
-->
# 分区独立分配算法

）算法说明

通过将Id分段分配给不同单元独立管理。同一个单元的不同机器再通过共享redis进行单元内的集中分配。

相当于每个单元预先分配了一批Id，然后再由各个单元内进行集中式分配。

比如int32的范围从-2147483648到2147483647，Id使用范围[1,2100000000)，前两位表示region，则每个region支持100000000（一亿）个资源，即Id组成格式可以表示为[0-20][0-99999999]。

即int32位可以支持20个单元，每个单元支持一亿个Id。

图片

2）算法总结

优点：

区域之间无状态，无网络调用，具备可靠唯一性

缺点：

分区容量存在局限性，需要预先评估业务容量。
从Id中无法判断生成的先后顺序。

3）适用场景

适用于int32类型的Id分配，单个区域内容量上限可评估的业务使用。